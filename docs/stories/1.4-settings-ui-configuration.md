# Story 1.4: Settings UI for Configuration

## Status: Ready

## Story
**As a** User  
**I want to** configure plugin settings for scope, locale, and severity filters  
**So that** I can customize the plugin behavior to match my workflow

## Epic
Epic 1: Language Pack & Rule Engine (MVP)

## Acceptance Criteria
1. **AC4.1**: Settings panel allows scope selection (selection/page/file)
   - Radio buttons or dropdown for scope selection
   - Clear labels explaining each scope option
   - Default to "page" scope for typical usage

2. **AC4.2**: Locale selection from available language packs
   - Dropdown showing loaded language pack locales
   - Display locale in user-friendly format (e.g., "Korean (ko-KR)")
   - Handle case when no packs are loaded

3. **AC4.3**: Severity filter controls (error/warning/info)
   - Checkboxes for each severity level
   - All levels enabled by default
   - Visual indication of active filters

4. **AC4.4**: Settings persist per file via figma.clientStorage
   - Settings saved automatically on change
   - File-specific settings override global defaults
   - Settings restored when plugin reopens

5. **AC4.5**: Clear UI for all configuration options
   - Organized into logical sections
   - Tooltips or help text for complex options
   - Follows Figma plugin UI guidelines

## Priority
Medium - Enhances user experience

## Effort Estimate
5 story points

## Dependencies
- Story 1.1: Language pack loading (for locale selection)
- Story 1.3: Rule evaluation (for severity levels)

## Tasks / Subtasks
- [ ] **Task 1**: Design settings UI layout
  - [ ] Create wireframes for settings panel
  - [ ] Define UI components and interactions
  - [ ] Plan responsive layout for different panel sizes

- [ ] **Task 2**: Implement scope selection controls
  - [ ] Create scope selection UI component
  - [ ] Add validation and default handling
  - [ ] Implement scope change event handling

- [ ] **Task 3**: Build locale selection functionality
  - [ ] Create locale dropdown component
  - [ ] Integrate with loaded language packs
  - [ ] Handle empty state (no packs loaded)

- [ ] **Task 4**: Create severity filter controls
  - [ ] Design checkbox group for severity levels
  - [ ] Implement filter state management
  - [ ] Add visual feedback for active filters

- [ ] **Task 5**: Implement settings persistence
  - [ ] Design settings data structure
  - [ ] Integrate with figma.clientStorage
  - [ ] Handle file-specific vs global settings

- [ ] **Task 6**: Add help and documentation
  - [ ] Create tooltips for complex settings
  - [ ] Add help text and examples
  - [ ] Implement contextual help system

- [ ] **Task 7**: Testing and validation
  - [ ] Unit tests for settings components
  - [ ] Integration tests for persistence
  - [ ] User acceptance testing

## Definition of Done
- [ ] All scope options (selection/page/file) are selectable
- [ ] Locale dropdown shows available language packs
- [ ] Severity filters work with checkbox controls
- [ ] Settings persist correctly per file
- [ ] UI follows Figma plugin design guidelines
- [ ] Help text and tooltips provide clear guidance
- [ ] Settings validation prevents invalid states
- [ ] Comprehensive testing completed

## UI Requirements
- Clean, organized layout with logical grouping
- Consistent with Figma plugin UI patterns
- Accessible with proper focus states and labels
- Responsive to different panel sizes
- Loading states for async operations

## Settings Data Structure
```json
{
  "scope": "page", // "selection" | "page" | "file"
  "locale": "ko-KR", // from loaded language packs
  "severityFilters": {
    "error": true,
    "warning": true,
    "info": true
  },
  "liveCheck": false, // for future use
  "fileSpecific": true
}
```

## Notes
- Settings should have sensible defaults
- Consider adding reset to defaults option
- Plan for future settings additions
- Validate settings on load to handle schema changes
