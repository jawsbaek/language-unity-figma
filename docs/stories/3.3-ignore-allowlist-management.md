# Story 3.3: Ignore/Allowlist Management

## Status: Ready

## Story
**As a** User  
**I want to** ignore false positives and manage allowlist entries  
**So that** I can customize the plugin to match my specific content needs

## Epic
Epic 3: Fix Application & Undo (MVP)

## Acceptance Criteria
1. **AC3.1**: User can ignore individual issues per session or file
   - "Ignore" button available for each issue
   - Choice between session-only or file-persistent ignore
   - Clear indication of ignore scope in UI

2. **AC3.2**: Ignored issues are hidden from the issues panel
   - Ignored issues don't appear in default view
   - Option to show ignored issues with different styling
   - Filter to toggle ignored issue visibility

3. **AC3.3**: Allowlist entries can be managed and removed (unignore)
   - List of ignored patterns/issues in settings
   - "Unignore" functionality to restore issues
   - Bulk management of ignore entries

4. **AC3.4**: Ignore settings persist appropriately (session vs file scope)
   - Session ignores: cleared when plugin closes
   - File ignores: saved in figma.clientStorage per file
   - Clear distinction between ignore types

5. **AC3.5**: Clear indication of ignored vs active issues
   - Visual styling differentiates ignored issues
   - Count of ignored issues shown separately
   - Status indicators for ignore state

## Priority
Medium - Quality of life feature

## Effort Estimate
6 story points

## Dependencies
- Story 2.2: Issues panel (for issue display and management)
- Story 1.4: Settings UI (for ignore management interface)

## Tasks / Subtasks
- [ ] **Task 1**: Design ignore system architecture
  - [ ] Define ignore data structures
  - [ ] Plan session vs file persistence
  - [ ] Design ignore pattern matching

- [ ] **Task 2**: Implement ignore functionality
  - [ ] Add ignore buttons to issue items
  - [ ] Create ignore scope selection UI
  - [ ] Build ignore pattern storage

- [ ] **Task 3**: Build ignore filtering system
  - [ ] Filter ignored issues from main view
  - [ ] Toggle to show/hide ignored issues
  - [ ] Visual styling for ignored items

- [ ] **Task 4**: Create ignore management interface
  - [ ] Settings panel for ignore management
  - [ ] List of current ignore entries
  - [ ] Unignore and bulk management features

- [ ] **Task 5**: Implement persistence system
  - [ ] Session-based ignore storage
  - [ ] File-specific ignore persistence
  - [ ] Ignore data migration and cleanup

- [ ] **Task 6**: Add visual indicators
  - [ ] Styling for ignored issues
  - [ ] Ignore status badges or icons
  - [ ] Count displays for ignored items

- [ ] **Task 7**: Build pattern matching system
  - [ ] Exact text matching for ignores
  - [ ] Rule-based ignore patterns
  - [ ] Context-aware ignore logic

- [ ] **Task 8**: Testing and validation
  - [ ] Ignore persistence testing
  - [ ] Pattern matching accuracy
  - [ ] UI interaction testing

## Definition of Done
- [ ] Issues can be ignored with session/file scope choice
- [ ] Ignored issues are filtered from main view
- [ ] Ignore management interface is functional
- [ ] Ignore settings persist correctly by scope
- [ ] Visual indicators clearly show ignore state
- [ ] Unignore functionality restores issues
- [ ] Pattern matching works accurately
- [ ] Performance impact is minimal

## Ignore Types
- **Session Ignore**: Temporary, cleared on plugin restart
- **File Ignore**: Persistent per Figma file
- **Rule Ignore**: Ignore all instances of specific rule
- **Pattern Ignore**: Ignore based on text patterns

## UI Components
- Ignore button with scope selection dropdown
- Ignored issues toggle in filter controls
- Ignore management section in settings
- Visual styling for ignored items (grayed out, strikethrough)

## Data Structure
```json
{
  "sessionIgnores": [
    {
      "issueId": "unique-id",
      "text": "original text",
      "ruleId": "rule-id",
      "timestamp": "2024-01-01T00:00:00Z"
    }
  ],
  "fileIgnores": [
    {
      "pattern": "exact text or regex",
      "ruleId": "rule-id",
      "scope": "file",
      "timestamp": "2024-01-01T00:00:00Z"
    }
  ]
}
```
