# Story 2.2: Issues Panel with Grouping and Filtering

## Status: Ready

## Story
**As a** Designer or UX Writer  
**I want to** view identified issues in an organized panel with grouping and filtering  
**So that** I can efficiently review and prioritize language consistency problems

## Epic
Epic 2: Scan & Issue Surfacing (MVP)

## Acceptance Criteria
1. **AC2.1**: Issues are grouped by page and rule type with clear counts
   - Expandable groups showing page names and issue counts
   - Rule-based grouping within pages
   - Total issue count displayed prominently

2. **AC2.2**: Search functionality works across issue descriptions and text content
   - Search input field with real-time filtering
   - Search across original text, suggestions, and rule names
   - Clear search results with highlighting

3. **AC2.3**: Filters available for severity level, page, and rule type
   - Severity filter checkboxes (error/warning/info)
   - Page filter dropdown for multi-page files
   - Rule type filter for different rule categories

4. **AC2.4**: Issue list shows context preview and rule information
   - Text snippet showing flagged content in context
   - Rule name and description
   - Suggested replacement clearly displayed

5. **AC2.5**: Pagination or virtual scrolling for large result sets
   - Efficient rendering of 1000+ issues
   - Smooth scrolling performance
   - Load more functionality for progressive loading

## Priority
High - Core user interface

## Effort Estimate
10 story points

## Dependencies
- Story 2.1: Text node traversal (for issue data)
- Story 1.3: Rule evaluation (for rule information)

## Tasks / Subtasks
- [ ] **Task 1**: Design issues panel UI architecture
  - [ ] Create wireframes for panel layout
  - [ ] Design grouping and hierarchy
  - [ ] Plan responsive behavior

- [ ] **Task 2**: Implement grouping functionality
  - [ ] Page-based grouping with expandable sections
  - [ ] Rule-based sub-grouping
  - [ ] Issue count badges and summaries

- [ ] **Task 3**: Build search functionality
  - [ ] Search input component with debouncing
  - [ ] Full-text search across issue data
  - [ ] Search result highlighting

- [ ] **Task 4**: Create filtering system
  - [ ] Severity level filter controls
  - [ ] Page filter for multi-page files
  - [ ] Rule type and category filters

- [ ] **Task 5**: Design issue display components
  - [ ] Issue item component with context preview
  - [ ] Rule information display
  - [ ] Action buttons (fix, ignore, etc.)

- [ ] **Task 6**: Implement virtual scrolling/pagination
  - [ ] Virtual scrolling for large lists
  - [ ] Progressive loading system
  - [ ] Performance optimization for rendering

- [ ] **Task 7**: Add interaction and state management
  - [ ] Issue selection and multi-select
  - [ ] Expand/collapse group states
  - [ ] Filter and search state persistence

- [ ] **Task 8**: Testing and optimization
  - [ ] Performance testing with large issue sets
  - [ ] UI responsiveness testing
  - [ ] Accessibility testing

## Definition of Done
- [ ] Issues grouped by page and rule with counts
- [ ] Search works across all issue content
- [ ] All filter types functional (severity, page, rule)
- [ ] Context preview and rule info displayed clearly
- [ ] Large result sets render efficiently
- [ ] UI is responsive and accessible
- [ ] State persists appropriately
- [ ] Performance targets met for 1000+ issues

## UI Components
- Collapsible group headers with counts
- Search input with clear/reset functionality
- Filter controls with visual state indication
- Issue items with rich content preview
- Loading states and empty state handling

## Performance Requirements
- Render 1000+ issues without lag
- Search response time < 200ms
- Smooth scrolling at 60fps
- Memory usage scales reasonably with issue count

## Accessibility Requirements
- Keyboard navigation through issues
- Screen reader support for groupings
- Focus management for expand/collapse
- High contrast support for issue severity
